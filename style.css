/* Custom overrides for improved UI and responsiveness */
/* Thay đổi một số biến màu để dễ nhìn hơn trên nền tối */
:root {
  --container-bg: rgba(10, 25, 47, 0.7);
  --cyan: #00e6e6;
  --yellow: #ffe600;
}

/* Điều chỉnh vùng đăng nhập trên thiết bị di động */
@media (max-width: 640px) {
  #auth-content {
    padding: 20px 15px;
    max-width: 90%;
  }
}

/* Thay đổi con trỏ mặc định để thân thiện hơn */
body {
  cursor: default;
}
/* --- Hard-disable redundant panels (history & next-prediction) in Soi Hủ core --- */
#history-section, #prediction-section, #history-list, #prediction-list {
  display: none !important;
  visibility: hidden !important;
  height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
}

/* --- Hard-disable 'DỰ ĐOÁN 3 VÁN TIẾP THEO' section in Soi Hủ --- */
#analysis-next-predictions { display: none !important; }


/* Performance: virtualize long containers */
.cv-auto{content-visibility:auto;contain-intrinsic-size:800px 600px;}

/* ===== FIX OVERLAP 2025-08-10 (HOA) ===== */
:root{
  --footer-h: 96px;            /* approximate total height of footer (button + copyright) */
  --footer-gap: 12px;
}
/* Keep footer on top of banners and content */
#main-footer{
  z-index: 1000 !important;
}
/* Reserve space so content doesn't hide under the footer */
#authScreen,
#aiCoreSelectionScreen{
  padding-bottom: calc(var(--footer-h) + var(--footer-gap) + env(safe-area-inset-bottom, 0px)) !important;
}
/* Allow the core-selection screen to scroll independently on mobile */
#aiCoreSelectionScreen{
  overflow-y: auto !important;
}
/* Keep the promo banner from colliding with footer */
#promo-banner{
  margin-bottom: calc(var(--footer-h) + var(--footer-gap)) !important;
}
/* ===== END FIX OVERLAP ===== */

/* ===== FIX CORE SELECTOR CROPPING (2025-08-10) ===== */
/* Active card is scaled up, so let the container breathe and avoid clipping */
#core-selector-container{
  height: clamp(420px, 62vh, 560px) !important;
  overflow: visible !important; /* allow scaled card to show fully */
}

/* Slightly reduce active scale to fit smaller viewports better */
.core-card.active{
  transform: translateX(0) scale(1.06) !important;
}

/* Ensure description can wrap and is visible */
.core-card { 
  overflow: visible !important;
}

/* Mobile tweaks */
@media (max-width: 640px){
  #core-selector-container{
    height: clamp(380px, 65vh, 520px) !important;
  }
  .core-card{
    width: 260px !important;
    height: 350px !important; /* keep readable proportions */
  }
}
/* ===== END FIX ===== */

/* ===== MOBILE BREAKPOINTS for CORE SELECTOR (2025-08-10) ===== */

/* Mobile chung (≤640px) */
@media (max-width: 640px){
  #core-selector-container{
    height: clamp(380px, 65dvh, 520px) !important;
    overflow: visible !important;
  }
  .core-card{
    width: 260px !important;
    height: 350px !important;
  }
  .core-card.active{ transform: translateX(0) scale(1.06) !important; }
}

/* Nhỏ (≤360px) */
@media (max-width: 360px){
  #core-selector-container{ height: clamp(360px, 62dvh, 500px) !important; }
  .core-card{ width: 240px !important; height: 330px !important; }
  .core-card.active{ transform: translateX(0) scale(1.04) !important; }
}

/* Vừa (361–400px) */
@media (min-width:361px) and (max-width:400px){
  #core-selector-container{ height: clamp(380px, 64dvh, 520px) !important; }
  .core-card{ width: 250px !important; height: 340px !important; }
}

/* Lớn (401–480px) */
@media (min-width:401px) and (max-width:480px){
  #core-selector-container{ height: clamp(420px, 66dvh, 560px) !important; }
  .core-card{ width: 270px !important; height: 360px !important; }
}

/* ===== END MOBILE BREAKPOINTS ===== */
/* ===== MIGRATED FROM index.html on 2025-08-09 19:41:40 ===== */

/* --- <style> block #1 --- */
/* --- CORE STYLES --- */
        :root {
            --cyan: #00ffff;
            --yellow: #fcee0a;
            --dark-blue: #0A192F;
            --container-bg: rgba(10, 25, 47, 0.85);
            --border-color: var(--cyan);
            --text-light: #f0f0f0;
            --error-red: #ff3c3c;
            --gold: #FFD700;
            --success-green: #00ff7f;

            /* Bổ sung màu neon và hiệu ứng hiện đại */
            --neon-blue: #00ccff;
            --neon-purple: #a100ff;
            --neon-pink: #ff007f;
            --dark-bg: #070918;
            --panel-blur: blur(12px);

            /* Soi Hủ new colors */
            --primary-color: #00ffff; /* Cyber Cyan */
            --secondary-color: #ff00ff; /* Cyber Magenta */
            --highlight-color: #ffffff;
            --golden-color: #FFD700;
            --container-bg-soihu: rgba(17, 24, 39, 0.7);
            --border-color-soihu: rgba(0, 255, 255, 0.25);
        }
        html { background-color: var(--bg-dark); }
        body {
            margin: 0; padding: 0; width: 100%; height: 100vh;
            font-family: 'Rajdhani', sans-serif; color: var(--text-light);
            overflow: hidden; background-color: transparent; cursor: crosshair;
        }

        /* Hiệu ứng nền neon di chuyển cho giao diện tương lai */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(130deg, var(--neon-blue), var(--neon-purple), var(--neon-pink));
            background-size: 200% 200%;
            animation: move-gradient 25s ease alternate infinite;
            filter: blur(60px);
            opacity: 0.4;
            z-index: -9;
        }

        @keyframes move-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .hidden { display: none !important; }
        .visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

        /* --- BACKGROUND & GLOBAL --- */
        .background-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; transition: opacity 0.5s ease; }
        #youtube-player { position: absolute; top: -9999px; left: -9999px; opacity: 0; pointer-events: none; }
        
        /* --- AUTH SCREEN --- */
        #authScreen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 10; padding: 15px; box-sizing: border-box; transition: opacity 0.5s ease; }
        #authScreen.fade-out { opacity: 0; pointer-events: none; }
        #auth-content {
            background: var(--container-bg); border: 2px solid var(--border-color);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.2), 0 0 25px var(--border-color);
            width: 100%; max-width: 400px; padding: 30px 25px; text-align: center; position: relative;
        }
        .corner-bracket { position: absolute; width: 25px; height: 25px; border-style: solid; border-color: var(--cyan); opacity: 0; animation: boot-up 0.6s ease-out forwards, corner-glow 2s infinite alternate; }
        .corner-bracket.top-left { top: -2px; left: -2px; border-width: 4px 0 0 4px; animation-delay: 0.2s; }
        .corner-bracket.top-right { top: -2px; right: -2px; border-width: 4px 4px 0 0; animation-delay: 0.3s; }
        .corner-bracket.bottom-left { bottom: -2px; left: -2px; border-width: 0 0 4px 4px; animation-delay: 0.4s; }
        .corner-bracket.bottom-right { bottom: -2px; right: -2px; border-width: 0 4px 4px 0; animation-delay: 0.5s; }
        .boot-anim { opacity: 0; transform: translateY(20px); animation: boot-up 0.6s ease-out forwards; }
        #auth-logo { display: block; margin-left: auto; margin-right: auto; width: 120px; height: 120px; border-radius: 50%; margin-bottom: 20px; border: 2px solid var(--yellow); box-shadow: 0 0 20px var(--yellow); }
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; }
        #authScreen h2 { font-size: 1.8em; color: var(--yellow); text-shadow: 0 0 10px var(--yellow), 0 0 20px var(--cyan); margin: 0 0 25px 0; letter-spacing: 2px; min-height: 1.2em; }
        #authScreen form { width: 100%; }
        input[type="text"], input[type="password"], input[type="tel"], input[type="number"] { font-family: 'Rajdhani', sans-serif; font-weight: 700; margin: 10px 0; width: 100%; padding: 14px; background: rgba(0,0,0,0.5); color: var(--yellow); font-size: 1.1em; border: 1px solid var(--border-color); transition: all .2s ease; box-sizing: border-box; }
        input::placeholder { color: rgba(255, 255, 255, 0.4); font-weight: 400; }
        input:focus { outline: none; border-color: var(--yellow); box-shadow: 0 0 15px var(--yellow); }
        button, .btn-style { font-family: 'Orbitron', sans-serif; font-weight: 700; padding: 15px 20px; cursor: pointer; font-size: 1em; text-transform: uppercase; border: none; transition: all .2s ease-out; display: inline-block; text-align: center; text-decoration: none; }
        
        .btn-primary {
            background: var(--cyan); color: var(--dark-blue);
            box-shadow: 0 0 10px var(--cyan);
            opacity: 0.9;
            transition: all 0.3s ease;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        .btn-primary:hover:not(:disabled) {
            opacity: 1;
            background: var(--yellow);
            color: var(--dark-blue);
            box-shadow: 0 0 25px var(--yellow), 0 0 40px var(--yellow);
            transform: scale(1.05);
        }
        .btn-primary.highlight {
             animation: pulse-glow 2s infinite alternate;
        }

        #loginBtn { margin-top: 15px; }
        #registerBtn { background: var(--yellow); color: var(--dark-blue); transform: scale(1.05); animation: button-glow-yellow 1.5s infinite alternate; }
        #registerBtn:hover:not(:disabled) { background: var(--yellow); color: var(--dark-blue); animation-play-state: paused; transform: scale(1.15); box-shadow: 0 0 40px var(--yellow); }
        button:active:not(:disabled) { transform: scale(0.95) !important; }
        button:disabled { background: #555; color: #888; cursor: not-allowed; animation: none; box-shadow: none; }
        .auth-error { color: var(--error-red); margin-top: 15px; height: 1em; font-size: 0.9em; }
        .auth-switch { margin-top: 20px; font-size: 1em; }
        .auth-switch a { color: var(--cyan); text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
        .auth-switch a:hover { color: var(--yellow); text-decoration: underline;}
        .f168-banner { display: block; text-decoration: none; color: var(--error-red); font-weight: 700; margin-top: 15px; padding: 10px; border: 1px solid var(--error-red); text-shadow: 0 0 5px var(--error-red); font-size: 0.9em; line-height: 1.4; cursor: pointer; transition: all 0.2s ease; animation: boot-up 0.6s ease-out forwards, warning-blink 1.2s infinite 0.6s; }
        .f168-banner:hover { background-color: rgba(255, 60, 60, 0.5); color: var(--text-light); text-shadow: 0 0 10px var(--text-light); animation-play-state: paused; }

        /* Download banner style (second definition for scopes later in the file) */
        .download-banner {
            /* use flex so an icon and label can sit neatly side by side */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            color: var(--cyan);
            font-weight: 700;
            margin-top: 15px;
            padding: 10px;
            border: 1px solid var(--cyan);
            text-shadow: 0 0 5px var(--cyan);
            font-size: 0.9em;
            line-height: 1.4;
            cursor: pointer;
            transition: all 0.2s ease;
            animation: boot-up 0.6s ease-out forwards;
        }
        .download-banner:hover {
            background-color: rgba(0, 255, 255, 0.2);
            color: var(--yellow);
            text-shadow: 0 0 10px var(--yellow);
        }
        /* Download banner style */
        .download-banner {
            /* use flex so an icon and label can sit neatly side by side */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            color: var(--cyan);
            font-weight: 700;
            margin-top: 15px;
            padding: 10px;
            border: 1px solid var(--cyan);
            /* subtle glow effect to stand out on neon backgrounds */
            text-shadow: 0 0 5px var(--cyan);
            font-size: 0.9em;
            line-height: 1.4;
            cursor: pointer;
            transition: all 0.2s ease;
            animation: boot-up 0.6s ease-out forwards;
        }
        .download-banner:hover {
            /* slightly brighter background and change text colour on hover */
            background-color: rgba(0, 255, 255, 0.2);
            color: var(--yellow);
            text-shadow: 0 0 10px var(--yellow);
        }

        /* Responsive adjustments: reduce icon and text size on small screens to prevent overlap */
        @media (max-width: 640px) {
            .download-banner {
                padding: 8px;
                font-size: 0.8em;
            }
            .download-banner img {
                height: 16px;
            }
        }

        /* --- MÀN HÌNH CHỌN LÕI A.I --- */
        #aiCoreSelectionScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Add extra bottom padding so the footer does not overlap the core selection content on larger screens */
            padding: 80px 15px 120px 15px;
            box-sizing: border-box;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #aiCoreSelectionScreen.fade-in { opacity: 1; }
        #user-info-bar { position: absolute; top: 15px; left: 15px; right: 15px; background: var(--container-bg); border: 1px solid var(--cyan); padding: 8px 15px; display: flex; justify-content: space-between; align-items: center; font-family: 'Orbitron', sans-serif; font-size: 0.9em; box-shadow: 0 0 10px var(--cyan); transition: border-color 0.5s ease, box-shadow 0.5s ease; }
        #user-info-left { display: flex; align-items: center; gap: 10px; }
        #user-avatar { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--cyan); object-fit: cover; }
        #user-info-bar span { text-shadow: 0 0 5px var(--cyan); }
        #user-energy { color: var(--yellow); text-shadow: 0 0 5px var(--yellow); transition: color 0.5s ease, text-shadow 0.5s ease; }
        #user-energy.high { color: var(--success-green); text-shadow: 0 0 8px var(--success-green); }
        #user-energy.low { color: var(--error-red); text-shadow: 0 0 8px var(--error-red); }
        #user-info-bar.low-energy { border-color: var(--error-red); box-shadow: 0 0 15px var(--error-red); animation: warning-blink 1.2s infinite; }
        #user-controls { display: flex; align-items: center; gap: 10px; }
        .control-btn { background: transparent; border: 1px solid var(--cyan); color: var(--cyan); padding: 8px; font-size: 0.8em; line-height: 1; border-radius: 5px; }
        .control-btn:hover { background: var(--cyan); color: var(--dark-blue); }
        .control-btn svg { width: 16px; height: 16px; fill: currentColor; }
        
        .title-vip {
            font-size: 2em !important;
            font-weight: 700;
            background: linear-gradient(90deg, var(--gold), var(--cyan), #ff00c1, var(--gold));
            background-size: 400%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: aurora-flow-vip 5s linear infinite;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.8), 0 0 15px rgba(0, 255, 255, 0.6), 0 0 30px rgba(255, 0, 193, 0.5);
        }

        #core-selector-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        @media (max-width: 640px) {
            #aiCoreSelectionScreen {
                padding-top: 60px; /* Adjusted padding to give more space */
            }
            #core-selector-container {
                height: 300px;
            }
        }


        #core-cards-wrapper {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .core-card {
            width: 280px;
            height: 350px;
            margin: 0 15px;
            position: absolute;
            /* Giao diện glassmorphism với màu neon */
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 20px var(--neon-blue), 0 0 40px var(--neon-purple);
            padding: 15px;
            text-align: center;
            backdrop-filter: var(--panel-blur);
            -webkit-backdrop-filter: var(--panel-blur);
            cursor: pointer;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s ease, box-shadow 0.3s ease;
            transform-style: preserve-3d;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        @media (max-width: 640px) {
            .core-card {
                width: 220px;
                height: 280px;
            }
        }

        .core-card:hover {
            box-shadow: 0 0 30px var(--neon-purple), 0 0 60px var(--neon-pink);
            transform: scale(1.05);
        }

        .core-card.active {
            transform: translateX(0) scale(1.1);
            opacity: 1;
            z-index: 5;
            border-color: var(--neon-purple);
            box-shadow: 0 0 35px var(--neon-purple), 0 0 70px var(--neon-pink);
        }
        .core-card.inactive {
            opacity: 0.4;
            pointer-events: none;
        }
        .core-card.prev {
            transform: translateX(-350px) scale(0.9);
            z-index: 3;
            opacity: 0.6;
        }
        .core-card.next {
            transform: translateX(350px) scale(0.9);
            z-index: 3;
            opacity: 0.6;
        }
        @media (max-width: 640px) {
            .core-card.prev { transform: translateX(-270px) scale(0.8); }
            .core-card.next { transform: translateX(270px) scale(0.8); }
        }

        .core-card.vip {
            border-image: linear-gradient(45deg, #FFD700, #FFA500) 1;
            animation: vip-glow 3s linear infinite;
        }
        .core-card.vip:hover {
            box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.8), 0 0 40px var(--golden-color);
        }
        .core-card.vip h3 {
            color: transparent;
            background: linear-gradient(90deg, #FFD700, #FFA500, #FFD700);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: text-shine 3s linear infinite;
        }
        @keyframes text-shine {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }


        .core-nav-btn { 
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: transparent; border: 2px solid var(--cyan); color: var(--cyan); font-size: 2em; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; line-height: 1; padding: 0; border-radius: 50%; text-shadow: 0 0 8px var(--cyan); flex-shrink: 0; z-index: 10;
        }
        .core-nav-btn:hover { background: var(--cyan); color: var(--dark-blue); }
        #prev-core-btn { left: 10%; }
        #next-core-btn { right: 10%; }


        .core-card h3 { color: var(--yellow); font-size: 1.2em; margin: 0 0 10px 0; flex-shrink: 0; }
        .gif-container { width: 100%; padding-bottom: 75%; height: 0; position: relative; background-color: rgba(0,0,0,0.3); border: 1px solid var(--border-color); margin-bottom: 10px; flex-shrink: 0; }
        .gif-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; border: 0; }
        .core-description { font-size: 0.85em; color: var(--text-light); line-height: 1.4; opacity: 0.9; font-weight: 400; text-align: center; margin: 0; }
        #promo-banner, .community-banner { width: 100%; max-width: 400px; padding: 10px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; text-decoration: none; }
        /* On larger screens add spacing above/below banners to prevent overlap and crowding */
        #promo-banner {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid var(--gold);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            animation: promo-glow 2s infinite alternate;
            margin-top: 2rem;
            margin-bottom: 0.5rem;
        }
        .community-banner {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--cyan);
            color: var(--cyan);
            font-weight: 700;
            text-shadow: 0 0 5px var(--cyan);
            justify-content: center;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        .community-banner:hover { background: rgba(0, 255, 255, 0.2); box-shadow: 0 0 15px var(--cyan); color: white; }
        #promo-text { color: var(--gold); text-decoration: none; font-weight: 700; font-size: 0.8em; text-align: left; flex-grow: 1; text-shadow: 0 0 5px var(--gold); }
        #promo-spinner-link { flex-shrink: 0; margin-left: 10px; }
        #promo-spinner { width: 40px; height: 40px; cursor: pointer; }
        .spinner-wheel { animation: spin 4s linear infinite; transform-origin: 50% 50%; }
        #promo-spinner:hover .spinner-wheel { animation-duration: 1s; }

        /* --- DRAGGABLE ROBOT CHAT --- */
        #chat-robot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 99;
            cursor: grab;
            transition: transform 0.2s ease-out;
        }
        #chat-robot-container.dragging {
            cursor: grabbing;
            transform: scale(1.1);
        }
        #chat-robot-icon {
            width: 80px;
            height: 80px;
            filter: drop-shadow(0 0 10px var(--cyan));
            transition: filter 0.3s ease;
            position: relative;
        }
        #chat-robot-icon:hover {
            filter: drop-shadow(0 0 20px var(--yellow));
        }
        #robot-speech-bubble {
            position: absolute;
            bottom: 90px;
            right: 0px;
            background: var(--container-bg);
            color: var(--yellow);
            padding: 8px 12px;
            border-radius: 10px;
            border: 1px solid var(--cyan);
            font-size: 0.9em;
            white-space: nowrap;
            opacity: 0;
            animation: bubble-fade-in 1s ease 1s forwards;
            pointer-events: none;
        }
        #robot-speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 20px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: var(--cyan);
            border-bottom: 0;
        }

        /* --- CHAT WINDOW (FIXED & RESPONSIVE) --- */
        #chat-window-container {
            position: fixed;
            z-index: 98;
            width: 90vw; /* Responsive width */
            max-width: 320px; /* Max width for larger screens */
            transition: all 0.3s ease-out;
            transform-origin: bottom right;
        }
        #chat-window-container.hidden {
            transform: scale(0);
            opacity: 0;
        }
        #chat-window {
            height: 350px;
            background: var(--container-bg);
            border: 1px solid var(--cyan);
            display: flex;
            flex-direction: column;
            border-radius: 8px;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.3);
        }
        #chat-messages { flex-grow: 1; padding: 10px; overflow-y: auto; font-size: 0.9em; display: flex; flex-direction: column; gap: 8px; }
        .chat-message { line-height: 1.4; max-width: 90%; }
        .chat-message.user { align-self: flex-end; text-align: right; }
        .chat-message.ai { align-self: flex-start; }
        .chat-username { font-weight: 700; display: block; margin-bottom: 2px; }
        .chat-username.user { color: var(--yellow); }
        .chat-username.ai { color: var(--cyan); }
        .chat-text { color: var(--text-light); padding: 8px 12px; border-radius: 10px; display: inline-block; }
        .chat-text.user { background-color: rgba(252, 238, 10, 0.2); }
        .chat-text.ai { background-color: rgba(0, 255, 255, 0.1); }
        .thinking-indicator span { display: inline-block; width: 6px; height: 6px; margin: 0 2px; background-color: var(--cyan); border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; }
        .thinking-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .thinking-indicator span:nth-child(2) { animation-delay: -0.16s; }
        #chat-form { display: flex; }
        #chat-input { flex-grow: 1; border: 1px solid var(--cyan); border-top-width: 2px; background: rgba(0,0,0,0.7); padding: 10px; color: var(--text-light); border-radius: 0 0 0 8px; }
        #chat-input:focus { outline: none; border-color: var(--yellow); }
        #chat-send-btn { background: var(--cyan); color: var(--dark-blue); border: none; padding: 0 15px; font-weight: 700; border-radius: 0 0 8px 0; }

        /* --- MODALS --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(10, 25, 47, 0.9); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); display: flex; justify-content: center; align-items: center; z-index: 15; padding: 15px; box-sizing: border-box; }
        .modal-content { background: var(--container-bg); border: 2px solid var(--gold); box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.3), 0 0 35px var(--gold); width: 100%; max-width: 450px; padding: 30px 25px; text-align: center; position: relative; }
        .modal-content.warning { border-color: var(--error-red); box-shadow: inset 0 0 20px rgba(255, 60, 60, 0.3), 0 0 35px var(--error-red); font-family: 'Fira Code', monospace; }
        .modal-content.warning h3 { color: var(--error-red); text-shadow: 0 0 15px var(--error-red), 0 0 5px #fff; animation: text-flicker 3s linear infinite; font-size: 1.4em; letter-spacing: 2px; }
        .modal-content.warning p { font-size: 1em; line-height: 1.6; text-shadow: 0 0 5px var(--error-red); opacity: 0.9; }
        .modal-content h3 { color: var(--gold); text-shadow: 0 0 10px var(--gold); margin-top: 0; }
        .modal-content p { margin-bottom: 20px; opacity: 0.9; }
        .modal-buttons { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .modal-buttons button, .modal-buttons a { width: 100%; box-sizing: border-box; }
        .close-modal-btn { position: absolute; top: 10px; right: 10px; background: transparent; border: none; color: var(--text-light); font-size: 1.5em; padding: 5px; line-height: 1; }
        
        /* Loading Modal */
        #loading-progress-bar-container { width: 100%; background-color: rgba(0,0,0,0.5); border: 1px solid var(--cyan); border-radius: 10px; padding: 3px; margin-top: 20px; }
        #loading-progress-bar { height: 20px; background: linear-gradient(90deg, var(--cyan), var(--yellow)); border-radius: 7px; transition: width 0.1s linear; }
        #loading-percentage { font-family: 'Orbitron', sans-serif; font-size: 1.5em; color: var(--yellow); text-shadow: 0 0 10px var(--yellow); margin-top: 15px; }

        /* Profile Modal */
        #profile-modal .modal-content { border-color: var(--cyan); box-shadow: inset 0 0 20px rgba(0, 255, 255, 0.3), 0 0 35px var(--cyan); }
        #profile-modal h3 { color: var(--cyan); text-shadow: 0 0 10px var(--cyan); }
        .profile-tabs { display: flex; border-bottom: 1px solid var(--cyan); margin-bottom: 20px; }
        .profile-tab { padding: 10px 15px; cursor: pointer; color: var(--cyan); opacity: 0.6; border: none; background: transparent; font-family: 'Orbitron', sans-serif; }
        .profile-tab.active { opacity: 1; border-bottom: 2px solid var(--yellow); }
        .profile-tab-content { display: none; }
        .profile-tab-content.active { display: block; }
        .profile-avatar-section { display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; }
        #profile-avatar-preview { width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--cyan); box-shadow: 0 0 15px var(--cyan); object-fit: cover; margin-bottom: 15px; }
        .profile-form-group { text-align: left; margin-bottom: 15px; }
        .profile-form-group label { display: block; margin-bottom: 5px; font-family: 'Orbitron', sans-serif; font-size: 0.9em; color: var(--cyan); }
        .profile-form-group small { font-size: 0.8em; opacity: 0.7; display: block; margin-top: 4px; }
        #activity-log-container { min-height: 250px; max-height: 250px; overflow-y: auto; text-align: left; font-family: 'Fira Code', monospace; font-size: 0.9em; border: 1px solid rgba(0, 255, 255, 0.2); padding: 10px; display: flex; align-items: center; justify-content: center; }
        .log-entry { margin-bottom: 8px; }
        .log-timestamp { color: var(--yellow); opacity: 0.8; margin-right: 10px; }
        .loading-spinner { width: 48px; height: 48px; border: 5px solid var(--border-color); border-bottom-color: transparent; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite; }

        /* --- NOTIFICATION SYSTEM --- */
        #notification-container { position: fixed; top: 20px; right: 20px; z-index: 100; display: flex; flex-direction: column; gap: 10px; }
        .notification { padding: 15px 20px; border-left: 5px solid; width: 300px; background: var(--container-bg); backdrop-filter: blur(5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); animation: slideIn 0.5s ease forwards, fadeOut 0.5s ease 4.5s forwards; }
        .notification.success { border-color: var(--success-green); color: var(--success-green); }
        .notification.error { border-color: var(--error-red); color: var(--error-red); }
        .notification.info { border-color: var(--cyan); color: var(--cyan); }
        
        /* --- FOOTER --- */
        #main-footer {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            z-index: 5;
        }
        #footer-contact-link {
            color: var(--cyan);
            text-decoration: none;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
            padding: 5px 10px;
            border: 1px solid var(--cyan);
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        #footer-contact-link:hover {
            background-color: var(--cyan);
            color: var(--dark-blue);
            box-shadow: 0 0 15px var(--cyan);
        }
        #copyright { font-size: 0.8em; color: rgba(255, 255, 255, 0.4); }

        /* --- LONGBÃO IV STYLES --- */
        #longbaoIVScreen { font-family: 'Rajdhani', sans-serif; background-color: #020a18; color: #e0e0e0; overflow: auto; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 20; padding: 1rem; }
        #longbaoIV-background-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.4; }
        :root { --neon-green: #00ff9b; --neon-gold: #ffd700; --neon-blue: #00c2ff; --neon-red: #ff1d58; --lb4-border-color: rgba(0, 255, 155, 0.4); --lb4-bg-color: rgba(15, 23, 42, 0.7); }
        .glow-text-player { text-shadow: 0 0 8px var(--neon-blue), 0 0 12px var(--neon-blue); }
        .glow-text-banker { text-shadow: 0 0 8px var(--neon-red), 0 0 12px var(--neon-red); }
        .glow-text-gold { text-shadow: 0 0 8px var(--neon-gold); }
        .glow-border-gold { border: 2px solid var(--neon-gold); box-shadow: 0 0 15px var(--neon-gold), inset 0 0 10px var(--neon-gold); }
        .progress-circle { border-radius: 50%; display: grid; place-items: center; background: conic-gradient(var(--neon-green) var(--progress, 0deg), #334155 0deg); position: relative; transition: background 0.5s; }
        .history-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(20px, 1fr)); grid-auto-rows: 20px; gap: 4px; background-color: rgba(0,0,0,0.4); border: 1px solid var(--lb4-border-color); padding: 8px; border-radius: 8px; min-height: 140px; backdrop-filter: blur(2px); }
        .history-dot { width: 100%; height: 100%; border-radius: 50%; animation: dot-enter 0.5s ease-out forwards; }
        .dot-player { background-color: #3b82f6; box-shadow: 0 0 6px #3b82f6; }
        .dot-banker { background-color: #ef4444; box-shadow: 0 0 6px #ef4444; }
        .dot-tie { background-color: #22c55e; box-shadow: 0 0 6px #22c55e; }
        .countdown-bar { height: 4px; width: 100%; background: linear-gradient(90deg, var(--neon-green), var(--neon-blue)); border-radius: 4px; box-shadow: 0 0 8px var(--neon-green); }
        .box-panel { background-color: var(--lb4-bg-color); border: 1px solid var(--lb4-border-color); border-radius: 0.5rem; backdrop-filter: blur(8px); box-shadow: 0 0 20px rgba(0, 255, 155, 0.1); }
        .strategy-panel { position: relative; z-index: 10; } /* Button Fix */
        .bet-option-box { display: flex; align-items: center; justify-content: center; padding: 0.5rem 0.75rem; font-size: 0.875rem; font-semibold; border: 2px solid #475569; background-color: rgba(30, 41, 59, 0.8); color: #94a3b8; border-radius: 0.375rem; transition: all 0.3s; position: relative; overflow: hidden; }
        .bet-option-box.active { color: white; text-shadow: 0 0 5px white; }
        .bet-option-box.active::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); animation: flash 1.5s infinite; }
        #bet-option-nhà-con.active { border-color: var(--neon-blue); background-color: rgba(0, 194, 255, 0.2); box-shadow: 0 0 15px var(--neon-blue); }
        #bet-option-nhà-cái.active { border-color: var(--neon-red); background-color: rgba(255, 29, 88, 0.2); box-shadow: 0 0 15px var(--neon-red); }
        #bet-option-hòa.active { border-color: var(--neon-green); background-color: rgba(0, 255, 155, 0.2); box-shadow: 0 0 15px var(--neon-green); }
        .sub-bet.active { border-color: var(--neon-gold); background-color: rgba(255, 215, 0, 0.2); box-shadow: 0 0 15px var(--neon-gold); }
        
        /* --- ULTIMATE TABLE SELECTION --- */
        .table-item-ultimate {
            background: linear-gradient(145deg, #0f172a, #1e293b);
            border: 1px solid transparent;
            border-image: linear-gradient(to bottom right, var(--neon-blue), var(--neon-green)) 1;
            clip-path: polygon(0 10%, 10% 0, 90% 0, 100% 10%, 100% 90%, 90% 100%, 10% 100%, 0 90%);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: table-enter 0.5s ease-out forwards;
        }
        .table-item-ultimate.hot-streak { animation: hot-table-glow 1.5s infinite alternate; }
        .table-item-ultimate::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 155, 0.2), transparent);
            transition: left 0.6s ease;
        }
        .table-item-ultimate:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 0 35px rgba(0, 255, 155, 0.5);
            border-image: linear-gradient(to bottom right, var(--neon-gold), var(--neon-green)) 1;
        }
        .table-item-ultimate:hover::before { left: 100%; }
        .win-rate-text-ultimate { color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green); }
        .mini-history-chart { display: flex; gap: 3px; margin-top: 8px; }
        .mini-dot { width: 10px; height: 10px; border-radius: 50%; }
        .mini-dot.player { background-color: #3b82f6; }
        .mini-dot.banker { background-color: #ef4444; }

        .screen { animation: screen-fade-in 0.5s ease-out; }
        .hud-corner { position: absolute; width: 20px; height: 20px; border: 2px solid var(--neon-green); opacity: 0.5; }
        .hud-corner.top-left { top: 10px; left: 10px; border-right: none; border-bottom: none; }
        .hud-corner.top-right { top: 10px; right: 10px; border-left: none; border-bottom: none; }
        .hud-corner.bottom-left { bottom: 10px; left: 10px; border-right: none; border-top: none; }
        .hud-corner.bottom-right { bottom: 10px; right: 10px; border-left: none; border-top: none; }
        .shockwave { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius: 50%; pointer-events: none; animation: shockwave-animation 0.7s ease-out forwards; }
        .energy-bar-pulsing { animation: pulse-red 1s infinite; }
        #ai-reasoning { min-height: 2.5rem; font-family: 'Fira Code', monospace; color: var(--neon-green); text-shadow: 0 0 8px var(--neon-green); }

        /* --- SOI HỦ STYLES --- */
        #soiHuScreen {
            font-family: 'Inter', sans-serif;
            z-index: 20;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            transition: opacity 0.5s ease-out; overflow-y: auto;
        }
        #soiHuScreen.hidden {
            display: none !important;
        }
        .container-screen {
            z-index: 4; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            transition: opacity 0.5s ease-out; overflow-y: auto;
        }
        #video-background-soihu {
            display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 2; opacity: 0.3;
        }
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 3; background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 51%, rgba(0,0,0,0.25) 100%);
            background-size: 100% 4px; pointer-events: none; animation: scan 7s linear infinite;
        }
        .glitch-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100; pointer-events: none; background: transparent;
            animation: glitch 3s steps(2, end) infinite;
        }

        .orbitron-font { font-family: 'Orbitron', sans-serif; }
        
        .glass-effect {
            background: var(--container-bg-soihu); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-color-soihu); border-radius: 1rem;
        }
        .aurora-text {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), #ffb300, var(--primary-color));
            background-size: 400%; -webkit-background-clip: text; background-clip: text;
            -webkit-text-fill-color: transparent; animation: aurora-flow 8s linear infinite;
        }
        @keyframes aurora-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        #lobby-container-2d {
            display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 1rem;
        }
        
        .lobby-card {
            background: rgba(10, 10, 20, 0.5); border: 2px solid transparent;
            padding: 1rem; text-align: center; cursor: pointer;
            transition: all 0.3s ease;
            clip-path: polygon(0 15px, 15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%);
            transform-style: preserve-3d;
        }
        .lobby-card:hover {
            background: rgba(20, 20, 40, 0.7); border-color: var(--primary-color);
            box-shadow: 0 0 25px var(--primary-color);
        }
        .lobby-card .img-wrapper {
            background: #000; margin-bottom: 1rem;
            clip-path: polygon(0 10px, 10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
        }
        .lobby-card img {
            width: 100%; height: auto; display: block; opacity: 0.9; transition: opacity 0.3s ease;
        }
        .lobby-card:hover img { opacity: 1; }
        .lobby-card-name {
            font-family: 'Orbitron', sans-serif; font-size: 1.2rem; text-transform: uppercase;
            color: #ccc; text-shadow: 0 0 5px rgba(0,0,0,0.7);
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }
        .lobby-card:hover .lobby-card-name {
            color: var(--primary-color); text-shadow: 0 0 10px var(--primary-color);
        }
        .lobby-card-stats {
            font-size: 0.75rem; color: var(--primary-color); opacity: 0.7;
            margin-top: 0.5rem; font-family: 'Orbitron', sans-serif;
        }

        #video-background-soihu iframe {
            position: absolute; top: 50%; left: 50%; width: 100vw; height: 100vh; transform: translate(-50%, -50%); object-fit: cover;
        }
        .back-button {
            position: absolute; top: 50%; transform: translateY(-50%); left: 1rem; 
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--primary-color); color: white; padding: 0.5rem 1rem;
            border-radius: 0.5rem; cursor: pointer; transition: all 0.3s;
            z-index: 10; font-family: 'Orbitron', sans-serif;
        }
        .back-button:hover {
            background: rgba(0, 255, 255, 0.2); box-shadow: 0 0 15px var(--primary-color);
        }

        .win-rate-value { display: inline-block; font-family: 'Orbitron', sans-serif; }
        
        .game-card {
            background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color-soihu);
            border-radius: 0.5rem; padding: 0.5rem; text-align: center; transition: all 0.3s ease; cursor: pointer;
            position: relative;
        }
        .game-card.is-hot {
            box-shadow: 0 0 20px #ff00ff, inset 0 0 15px rgba(255, 0, 255, 0.5);
            border-color: #ff00ff;
            animation: hot-pulse 2s infinite;
        }
        @keyframes hot-pulse { 0%, 100% { box-shadow: 0 0 20px #ff00ff, inset 0 0 15px rgba(255, 0, 255, 0.5); } 50% { box-shadow: 0 0 30px #ff00ff, inset 0 0 20px rgba(255, 0, 255, 0.7); } }
        .hot-marker {
            position: absolute; top: -10px; right: -10px; background: #ff00ff; color: white;
            font-size: 0.6rem; padding: 2px 6px; border-radius: 5px; font-weight: bold;
            text-transform: uppercase;
        }
        .game-card:hover { transform: translateY(-5px); box-shadow: 0 0 15px var(--primary-color); }
        .game-card img { width: 100%; border-radius: 0.25rem; margin-bottom: 0.5rem; }
        .game-card-name {
            font-size: 0.8rem; font-weight: bold; text-transform: uppercase; color: #ddd;
            height: 40px; display: flex; align-items: center; justify-content: center; text-align: center;
        }
        .game-win-rate { font-size: 0.75rem; color: var(--primary-color); }
        .win-rate-bar-bg {
            width: 100%; height: 6px; background-color: rgba(0, 0, 0, 0.4);
            border-radius: 3px; margin-top: 6px; overflow: hidden; border: 1px solid rgba(0, 255, 255, 0.2);
        }
        .win-rate-bar-fill {
            height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 3px; transition: width 0.5s ease-in-out;
        }

        /* Analysis Modal Styles */
        .analysis-content { width: 100%; max-width: 450px; }
        .analysis-data p { margin-bottom: 0.75rem; font-size: 1rem; }
        .golden-time-btn {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: 2px solid #FFF; box-shadow: 0 0 20px #FFD700;
            color: #000; font-family: 'Orbitron', sans-serif; font-weight: 900;
            padding: 0.75rem; border-radius: 0.5rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: pulse-soihu 2s infinite;
        }
        @keyframes pulse-soihu {
            0% { transform: scale(1); box-shadow: 0 0 20px #FFD700; }
            50% { transform: scale(1.05); box-shadow: 0 0 30px #FFD700; }
            100% { transform: scale(1); box-shadow: 0 0 20px #FFD700; }
        }
        .plan-input {
            background: rgba(0,0,0,0.3); border: 1px solid var(--border-color-soihu);
            color: white; padding: 0.75rem; border-radius: 0.5rem; width: 100%;
        }
        .plan-button {
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            color: white; font-family: 'Orbitron', sans-serif; font-weight: bold;
            padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; transition: all 0.3s;
        }
        .plan-button:hover { box-shadow: 0 0 20px var(--secondary-color); }

        /* New sections for Soi Hủ analysis page */
        .analysis-sections .section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color-soihu);
            border-radius: 0.5rem;
            box-shadow: 0 0 15px var(--primary-color);
        }
        #history-list, #prediction-list {
            padding-left: 1rem;
        }
        #history-list li, #prediction-list li {
            margin-bottom: 0.25rem;
        }
        /* Customize energy bar for Soi Hu */
        #energy-bar-container-soihu {
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid var(--border-color-soihu);
        }
        #energy-bar-soihu {
            background: linear-gradient(90deg, var(--neon-green), var(--neon-blue));
        }
        #plan-output {
            margin-top: 1rem; background: rgba(0,0,0,0.3); border-radius: 0.5rem;
            padding: 1rem; text-align: left; white-space: pre-wrap; font-family: monospace;
            border: 1px solid var(--border-color-soihu); font-size: 0.8rem;
        }

        /* Scanning Animation */
        #scan-container {
            z-index: 99; background: rgba(0,0,0,0.9); display: flex;
            align-items: center; justify-content: center; flex-direction: column;
        }
        #scan-container::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            animation: scan-line 2.5s linear infinite;
        }
        @keyframes scan-line { 0% { top: 0; } 100% { top: 100%; } }

        /* Ticker */
        #ticker-container {
            z-index: 50; position: fixed; bottom: 0; left: 0; width: 100%;
            background: rgba(0,0,0,0.7); padding: 0.5rem; overflow: hidden;
            border-top: 1px solid var(--border-color-soihu);
        }
        #ticker-content {
            white-space: nowrap; animation: ticker-scroll 30s linear infinite;
        }
        @keyframes ticker-scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* --- ANIMATIONS --- */
        @keyframes boot-up { to { opacity: 1; transform: translateY(0); } }
        @keyframes corner-glow { from { box-shadow: 0 0 8px var(--cyan); } to { box-shadow: 0 0 18px var(--cyan), 0 0 4px white; } }
        @keyframes button-glow-yellow { from { box-shadow: 0 0 15px var(--yellow); transform: scale(1.05); } to { box-shadow: 0 0 35px var(--yellow), 0 0 10px var(--yellow); transform: scale(1.1); } }
        @keyframes warning-blink { 0%, 100% { background-color: rgba(255, 60, 60, 0.15); box-shadow: 0 0 8px rgba(255, 60, 60, 0.7); } 50% { background-color: rgba(255, 60, 60, 0.3); box-shadow: 0 0 18px var(--error-red); } }
        @keyframes promo-glow { from { box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); } to { box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), inset 0 0 10px rgba(255, 215, 0, 0.3); } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes text-flicker { 0% { opacity: 0.1; } 2% { opacity: 1; } 8% { opacity: 0.1; } 9% { opacity: 1; } 12% { opacity: 0.2; } 20% { opacity: 1; } 25% { opacity: 0.3; } 30% { opacity: 1; } 70% { opacity: 0.7; } 72% { opacity: 0.2; } 77% { opacity: .9; } 100% { opacity: .9; } }
        @keyframes slideIn { from { transform: translateX(110%); } to { transform: translateX(0); } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; transform: translateX(110%); } }
        @keyframes screen-fade-in { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        @keyframes dot-enter { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1); } }
        @keyframes flash { from { left: -100%; } to { left: 100%; } }
        @keyframes table-enter { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shockwave-animation { from { width: 0; height: 0; opacity: 0.7; border: 2px solid var(--neon-gold); } to { width: 200%; height: 200%; opacity: 0; border: 2px solid transparent; } }
        @keyframes pulse-red { 50% { box-shadow: 0 0 15px var(--neon-red); } }
        @keyframes hot-table-glow {
            from { box-shadow: 0 0 15px rgba(255, 29, 88, 0.4); border-image: linear-gradient(to bottom right, var(--neon-red), var(--neon-gold)) 1; }
            to { box-shadow: 0 0 40px rgba(255, 29, 88, 0.8); border-image: linear-gradient(to bottom right, var(--neon-gold), var(--neon-red)) 1; }
        }
        @keyframes fadeInUp { from { opacity: 0; transform: translate3d(0, 40px, 0); } to { opacity: 1; transform: translate3d(0, 0, 0); } }
        @keyframes aurora-flow-vip { 0% { background-position: 0% 50%; } 50% { background-position: 200% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes vip-glow { 0%, 100% { border-color: #00bfff; box-shadow: 0 0 5px #00bfff, 0 0 10px #00bfff, 0 0 15px #00bfff; } 50% { border-color: #ffb300; box-shadow: 0 0 5px #ffb300, 0 0 15px #ffb300, 0 0 25px #ffb300; } }
        @keyframes vip-chat-glow { 0%, 100% { border-color: var(--vip-color); box-shadow: 0 0 8px var(--vip-color); } 50% { border-color: #ff00c1; box-shadow: 0 0 16px #ff00c1; } }
        @keyframes pulse { from { transform: scale(1); box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); } to { transform: scale(1.02); box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); } }
        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 5px var(--cyan), 0 0 10px var(--cyan);
            }
            50% {
                box-shadow: 0 0 20px var(--yellow), 0 0 30px var(--yellow);
                background-color: var(--yellow);
            }
            100% {
                box-shadow: 0 0 5px var(--cyan), 0 0 10px var(--cyan);
            }
        }
        @keyframes bubble-fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 640px) {
            #longbaoIVScreen { padding: 0.5rem; }
            #longbaoIVScreen #table-selection-screen h1 { font-size: 1.5rem; }
            #longbaoIVScreen #tool-screen #main-prediction-text { font-size: 2.5rem; }
            #longbaoIVScreen #tool-screen #progress-circle { width: 120px; height: 120px; }
            #longbaoIVScreen #tool-screen .box-panel { padding: 0.75rem; }
            #longbaoIVScreen #tool-screen #advanced-analysis-btn { padding: 8px; font-size: 0.9em; }
            #longbaoIVScreen #tool-screen #capital-input { padding: 8px; font-size: 0.9em; }

            #auth-content {
                padding: 20px 15px;
            }
            #auth-logo {
                width: 100px;
                height: 100px;
            }
            #authScreen h2 {
                font-size: 1.5em;
            }
            #aiCoreSelectionScreen {
                padding: 70px 15px 15px 15px;
                gap: 10px;
            }
            #core-selector-container {
                height: 330px;
            }
            .core-description {
                font-size: 0.8em;
            }
            #chat-window-container {
                width: calc(100vw - 40px); /* Adjust chat window size for mobile */
            }
            #main-footer {
                font-size: 0.9em; /* Make footer text slightly smaller if needed */
            }
            .core-nav-btn {
                width: 35px;
                height: 35px;
                font-size: 1.5em;
            }
        }
        /* --- Soi Hu Responsive Styles --- */
        @media (max-width: 768px) {
            .lobby-card { padding: 0.75rem; }
            .lobby-card-name { font-size: 1rem; }
            .lobby-card-stats { font-size: 0.65rem; }
            .back-button { top: 1rem; transform: translateY(0); }
        }
    
/* === CUSTOM FIXES === */

/* Fix lỗi đè lên giữa giới thiệu lõi và nội dung vàng */
#core-selector-container {
    /* Provide more space below the slider so it doesn't collide with banners */
    margin-bottom: 5rem;
    z-index: 5;
}
#promo-banner {
    /* Align spacing with general banner styles */
    margin-top: 2rem;
    margin-bottom: 0.5rem;
    position: relative;
    z-index: 1;
}

/* Giãn cách các phần trong form đăng nhập */
#auth-content form > div,
#auth-content form > button,
.auth-switch {
    margin-bottom: 1rem;
}

/* Giãn cách các phần ở màn hình chọn lõi */
#aiCoreSelectionScreen {
    gap: 2rem;
}

/* --- OVERRIDE STYLES FOR FUTURISTIC THEME --- */
#aiCoreSelectionScreen {
    background: rgba(10, 25, 47, 0.65);
    backdrop-filter: var(--panel-blur);
    -webkit-backdrop-filter: var(--panel-blur);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 20px var(--neon-blue);
}
/* --- END block #1 --- */

/* --- <style> block #2 --- */
@media (max-width: 480px) {
    /* Make the promo banner more compact and add extra spacing below */
    #promo-banner {
      margin-top: 1rem !important;
      margin-bottom: 2rem !important;
      padding: 6px !important;
      gap: 4px !important;
      font-size: 0.65rem !important;
    }
    #promo-spinner {
      width: 24px !important;
      height: 24px !important;
    }
  }
/* --- END block #2 --- */

/* --- <style> block #3 --- */
@media (max-width: 480px) {
            /* Make the promo banner more compact on very small screens */
            #promo-banner {
                max-width: 320px !important;
                width: 90% !important;
                margin: 0 auto 1.5rem !important;
                padding: 6px !important;
                flex-direction: column !important;
                align-items: center !important;
                gap: 6px !important;
            }
            #promo-text {
                font-size: 0.75rem !important;
                text-align: center !important;
            }
            #promo-spinner {
                width: 30px !important;
                height: 30px !important;
            }
            /* Provide extra margin between banner and footer to avoid overlap */
            #banner-container {
                margin-bottom: 2.5rem !important;
            }
        }
/* --- END block #3 --- */

/* --- <style> block #4 --- */
@media (max-width: 480px) {
    /* Provide breathing room between sections on small screens */
    #core-selector-container {
      /* add space above and below the slider so it doesn't overlap the user bar or banners */
      margin-top: 2rem;
      margin-bottom: 5rem;
    }
    /* Reduce card dimensions slightly for smaller screens */
    .core-card {
      width: 160px;
      height: 230px;
    }
    /* Stack promo banner contents vertically and adjust spacing */
    #promo-banner {
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
      font-size: 0.75rem;
    }
    #promo-spinner {
      width: 30px;
      height: 30px;
    }
    /* Position community banner below the promo banner with extra spacing */
    .community-banner {
      margin-top: 1rem;
      margin-bottom: 2rem;
      width: 100%;
      max-width: 400px;
      display: flex;
      justify-content: center;
    }
    /* Lift the chat robot a bit so it doesn't overlap banners */
    #chat-robot-container {
      bottom: 90px !important;
    }
  }
/* --- END block #4 --- */

/* --- <style> block #5 --- */
/* --- CORE STYLES --- */
        :root {
            --cyan: #00ffff;
            --yellow: #fcee0a;
            --dark-blue: #0A192F; 
            --container-bg: rgba(10, 25, 47, 0.85);
            --border-color: var(--cyan);
            --text-light: #f0f0f0;
            --error-red: #ff3c3c;
            --gold: #FFD700;
            --success-green: #00ff7f;
            --bg-dark: #0A0A0A;
        }
        html { background-color: var(--bg-dark); }
        body {
            margin: 0; padding: 0; width: 100%; height: 100vh;
            font-family: 'Rajdhani', sans-serif; color: var(--text-light);
            overflow: hidden; background-color: transparent; cursor: crosshair;
        }
        .hidden { display: none !important; }

        /* --- BACKGROUND & GLOBAL --- */
        .background-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; }
        
        /* --- AUTH SCREEN --- */
        #authScreen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 10; padding: 15px; box-sizing: border-box; transition: opacity 0.5s ease; }
        #authScreen.fade-out { opacity: 0; pointer-events: none; }
        #auth-content {
            background: var(--container-bg); border: 2px solid var(--border-color);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.2), 0 0 25px var(--border-color);
            width: 100%; max-width: 400px; padding: 30px 25px; text-align: center; position: relative;
        }
        .corner-bracket { position: absolute; width: 25px; height: 25px; border-style: solid; border-color: var(--cyan); opacity: 0; animation: boot-up 0.6s ease-out forwards, corner-glow 2s infinite alternate; }
        .corner-bracket.top-left { top: -2px; left: -2px; border-width: 4px 0 0 4px; animation-delay: 0.2s; }
        .corner-bracket.top-right { top: -2px; right: -2px; border-width: 4px 4px 0 0; animation-delay: 0.3s; }
        .corner-bracket.bottom-left { bottom: -2px; left: -2px; border-width: 0 0 4px 4px; animation-delay: 0.4s; }
        .corner-bracket.bottom-right { bottom: -2px; right: -2px; border-width: 0 4px 4px 0; animation-delay: 0.5s; }
        .boot-anim { opacity: 0; transform: translateY(20px); animation: boot-up 0.6s ease-out forwards; }
        #auth-logo { display: block; margin-left: auto; margin-right: auto; width: 120px; height: 120px; border-radius: 50%; margin-bottom: 20px; border: 2px solid var(--yellow); box-shadow: 0 0 20px var(--yellow); }
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; }
        #authScreen h2 { font-size: 1.8em; color: var(--yellow); text-shadow: 0 0 10px var(--yellow), 0 0 20px var(--cyan); margin: 0 0 25px 0; letter-spacing: 2px; min-height: 1.2em; }
        input[type="text"], input[type="password"], input[type="tel"], input[type="number"] { font-family: 'Rajdhani', sans-serif; font-weight: 700; margin: 10px 0; width: 100%; padding: 14px; background: rgba(0,0,0,0.5); color: var(--yellow); font-size: 1.1em; border: 1px solid var(--border-color); transition: all .2s ease; box-sizing: border-box; }
        input::placeholder { color: rgba(255, 255, 255, 0.4); font-weight: 400; }
        input:focus { outline: none; border-color: var(--yellow); box-shadow: 0 0 15px var(--yellow); }
        button, .btn-style { font-family: 'Orbitron', sans-serif; font-weight: 700; padding: 15px 20px; cursor: pointer; font-size: 1em; text-transform: uppercase; border: none; transition: all .2s ease-out; display: inline-block; text-align: center; text-decoration: none; }
        .btn-primary { background: var(--cyan); color: var(--dark-blue); box-shadow: 0 0 10px var(--cyan); opacity: 0.9; transition: all 0.3s ease; width: 100%; position: relative; overflow: hidden; }
        .btn-primary:hover:not(:disabled) { opacity: 1; background: var(--yellow); color: var(--dark-blue); box-shadow: 0 0 25px var(--yellow), 0 0 40px var(--yellow); transform: scale(1.05); }
        button:disabled { background: #555; color: #888; cursor: not-allowed; animation: none; box-shadow: none; }
        .auth-switch { margin-top: 20px; font-size: 1em; }
        .auth-switch a { color: var(--cyan); text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
        .auth-switch a:hover { color: var(--yellow); text-decoration: underline;}
        .f168-banner { display: block; text-decoration: none; color: var(--error-red); font-weight: 700; margin-top: 15px; padding: 10px; border: 1px solid var(--error-red); text-shadow: 0 0 5px var(--error-red); font-size: 0.9em; line-height: 1.4; cursor: pointer; transition: all 0.2s ease; animation: boot-up 0.6s ease-out forwards, warning-blink 1.2s infinite 0.6s; }
        .f168-banner:hover { background-color: rgba(255, 60, 60, 0.5); color: var(--text-light); text-shadow: 0 0 10px var(--text-light); animation-play-state: paused; }

        /* --- MÀN HÌNH CHỌN LÕI A.I --- */
        #aiCoreSelectionScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Căn giữa theo chiều dọc */
            align-items: center;
            padding: 20px 15px;
            box-sizing: border-box;
            opacity: 0;
            transition: opacity 0.5s ease;
            gap: 2rem; /* Khoảng cách nhất quán giữa các phần tử */
        }
        #aiCoreSelectionScreen.fade-in { opacity: 1; }
        #user-info-bar { position: absolute; top: 15px; left: 15px; right: 15px; background: var(--container-bg); border: 1px solid var(--cyan); padding: 8px 15px; display: flex; justify-content: space-between; align-items: center; font-family: 'Orbitron', sans-serif; font-size: 0.9em; box-shadow: 0 0 10px var(--cyan); }
        #user-info-left { display: flex; align-items: center; gap: 10px; }
        #user-avatar { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--cyan); object-fit: cover; }
        #user-info-bar span { text-shadow: 0 0 5px var(--cyan); }
        #user-energy { color: var(--yellow); text-shadow: 0 0 5px var(--yellow); }
        #user-energy.low { color: var(--error-red); text-shadow: 0 0 8px var(--error-red); }
        #user-info-bar.low-energy { border-color: var(--error-red); box-shadow: 0 0 15px var(--error-red); animation: warning-blink 1.2s infinite; }
        #user-controls { display: flex; align-items: center; gap: 10px; }
        .control-btn { background: transparent; border: 1px solid var(--cyan); color: var(--cyan); padding: 8px; font-size: 0.8em; line-height: 1; border-radius: 5px; }
        .control-btn:hover { background: var(--cyan); color: var(--dark-blue); }
        .control-btn svg { width: 16px; height: 16px; fill: currentColor; }
        
        .title-vip {
            font-size: 2em !important;
            font-weight: 700;
            background: linear-gradient(90deg, var(--gold), var(--cyan), #ff00c1, var(--gold));
            background-size: 400%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: aurora-flow-vip 5s linear infinite;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.8), 0 0 15px rgba(0, 255, 255, 0.6), 0 0 30px rgba(255, 0, 193, 0.5);
            margin-top: 50px; /* Đẩy tiêu đề xuống từ thanh user-info */
        }

        /* === ULTIMATE CORE SELECTION INTERFACE (NEW) === */
        #core-selector-container {
            perspective: 1200px; /* Độ sâu cho hiệu ứng 3D */
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 420px;
        }

        #core-cards-wrapper {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d; /* Bật không gian 3D cho các card con */
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .core-card {
            position: absolute;
            left: 0;
            right: 0;
            margin: auto;
            width: 300px;
            height: 400px;
            background: linear-gradient(165deg, rgba(15, 32, 58, 0.85), rgba(10, 25, 47, 0.95));
            border: 2px solid var(--border-color);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 15px rgba(0, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            cursor: pointer;
            transition: transform 0.6s ease-out, opacity 0.6s ease-out, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            padding: 20px;
            overflow: hidden;
            border-radius: 10px;
        }

        .core-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: 
                repeating-linear-gradient(0deg, transparent 0, transparent 2px, rgba(0, 255, 255, 0.05) 3px, rgba(0, 255, 255, 0.05) 4px),
                repeating-linear-gradient(90deg, transparent 0, transparent 2px, rgba(0, 255, 255, 0.05) 3px, rgba(0, 255, 255, 0.05) 4px);
            opacity: 0.5;
            pointer-events: none;
            z-index: 1;
        }
        
        .core-card::after {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
            transition: opacity 0.5s;
            opacity: 0;
            animation: rotate-sheen 8s linear infinite;
        }

        @keyframes rotate-sheen {
            from { transform: rotate(0deg); } to { transform: rotate(360deg); }
        }

        .core-card:hover::after { opacity: 1; }
        
        .core-card.active {
            transform: translateZ(0) scale(1.05); /* Mang ra phía trước và phóng to nhẹ */
            opacity: 1;
            z-index: 10;
            border-color: var(--yellow);
            box-shadow: 0 0 40px var(--yellow), inset 0 0 20px rgba(255, 236, 10, 0.25);
        }

        .core-card.prev {
            transform: translateX(-55%) rotateY(45deg) scale(0.8); /* Di chuyển sang trái, xoay và thu nhỏ */
            opacity: 0.6;
            z-index: 5;
        }

        .core-card.next {
            transform: translateX(55%) rotateY(-45deg) scale(0.8); /* Di chuyển sang phải, xoay và thu nhỏ */
            opacity: 0.6;
            z-index: 5;
        }
        
        .core-card.inactive {
            transform: scale(0.5);
            opacity: 0;
            pointer-events: none;
        }

        .core-card.vip {
            border-image: linear-gradient(45deg, var(--gold), #FFA500) 1;
            animation: vip-glow 3s linear infinite;
        }
        .core-card.vip:hover, .core-card.vip.active {
            box-shadow: 0 0 40px var(--golden-color), inset 0 0 25px rgba(255, 215, 0, 0.5);
        }
        .core-card.vip h3 {
            color: transparent;
            background: linear-gradient(90deg, var(--gold), #FFA500, var(--gold));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: text-shine 3s linear infinite;
        }

        .core-nav-btn { 
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: transparent; border: 2px solid var(--cyan); color: var(--cyan); font-size: 2.5em; width: 50px; height: 50px; display: flex; justify-content: center; align-items: center; line-height: 1; padding: 0; border-radius: 50%; text-shadow: 0 0 8px var(--cyan); z-index: 20;
        }
        .core-nav-btn:hover { background: var(--cyan); color: var(--dark-blue); transform: translateY(-50%) scale(1.1); }
        #prev-core-btn { left: 10px; }
        #next-core-btn { right: 10px; }

        .core-card h3 { color: var(--yellow); font-size: 1.4em; margin: 0 0 10px 0; text-shadow: 0 0 8px currentColor; }
        .gif-container { width: 100%; padding-bottom: 75%; height: 0; position: relative; background-color: rgba(0,0,0,0.3); border: 1px solid var(--border-color); margin-bottom: 10px; border-radius: 8px; overflow: hidden; }
        .gif-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; border: 0; }
        .core-description { font-size: 0.9em; color: var(--text-light); line-height: 1.5; opacity: 0.9; text-align: center; margin: 0; }
        
        /* === BANNER LAYOUT FIX (NEW) === */
        #banner-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem; /* Khoảng cách giữa 2 banner */
            width: 100%;
            max-width: 450px;
        }
        #promo-banner, .community-banner { width: 100%; box-sizing: border-box; text-decoration: none; }
        #promo-banner { background: rgba(255, 215, 0, 0.1); border: 1px solid var(--gold); box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); animation: promo-glow 2s infinite alternate; display: flex; justify-content: space-between; align-items: center; padding: 10px; border-radius: 8px; }
        .community-banner { background: rgba(0, 255, 255, 0.1); border: 1px solid var(--cyan); color: var(--cyan); font-weight: 700; text-shadow: 0 0 5px var(--cyan); justify-content: center; transition: all 0.3s ease; padding: 10px; border-radius: 8px; text-align: center; }
        .community-banner:hover { background: rgba(0, 255, 255, 0.2); box-shadow: 0 0 15px var(--cyan); color: white; }
        #promo-text { color: var(--gold); font-weight: 700; font-size: 0.9em; text-align: left; flex-grow: 1; text-shadow: 0 0 5px var(--gold); }
        #promo-spinner-link { flex-shrink: 0; margin-left: 10px; }
        #promo-spinner { width: 40px; height: 40px; cursor: pointer; }
        .spinner-wheel { animation: spin 4s linear infinite; transform-origin: 50% 50%; }
        #promo-spinner:hover .spinner-wheel { animation-duration: 1s; }

        /* --- FOOTER --- */
        #main-footer {
            position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
            display: flex; flex-direction: column; align-items: center; gap: 8px; z-index: 5;
        }
        #footer-contact-link { color: var(--cyan); text-decoration: none; font-family: 'Orbitron', sans-serif; font-size: 0.9em; padding: 5px 10px; border: 1px solid var(--cyan); border-radius: 5px; transition: all 0.3s ease; }
        #footer-contact-link:hover { background-color: var(--cyan); color: var(--dark-blue); box-shadow: 0 0 15px var(--cyan); }
        #copyright { font-size: 0.8em; color: rgba(255, 255, 255, 0.4); }

        /* --- ANIMATIONS --- */
        @keyframes boot-up { to { opacity: 1; transform: translateY(0); } }
        @keyframes corner-glow { from { box-shadow: 0 0 8px var(--cyan); } to { box-shadow: 0 0 18px var(--cyan), 0 0 4px white; } }
        @keyframes warning-blink { 50% { background-color: rgba(255, 60, 60, 0.3); box-shadow: 0 0 18px var(--error-red); } }
        @keyframes promo-glow { to { box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), inset 0 0 10px rgba(255, 215, 0, 0.3); } }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes aurora-flow-vip { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 200% 50%; } }
        @keyframes text-shine { to { background-position: 200% 0; } }
        @keyframes vip-glow { 50% { border-color: #00bfff; box-shadow: 0 0 5px #00bfff, 0 0 10px #00bfff, 0 0 20px #00bfff; } }
        
        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 768px) {
            .title-vip {
                font-size: 1.8em !important;
                margin-top: 60px;
            }
            #core-selector-container {
                height: 380px;
                perspective: 800px;
            }
            .core-card {
                width: 250px;
                height: 350px;
                padding: 15px;
            }
            .core-card.prev { transform: translateX(-45%) rotateY(40deg) scale(0.75); }
            .core-card.next { transform: translateX(45%) rotateY(-40deg) scale(0.75); }
            .core-nav-btn {
                width: 40px; height: 40px; font-size: 2em;
            }
        }

        @media (max-width: 480px) {
            #aiCoreSelectionScreen {
                padding-top: 15px;
                justify-content: flex-start; /* Bắt đầu từ trên xuống */
            }
            .title-vip {
                font-size: 1.5em !important;
                margin-top: 65px; /* Thêm không gian từ thanh user */
                margin-bottom: 0;
            }
            #core-selector-container {
                height: 300px;
                perspective: 600px;
            }
            .core-card {
                width: 200px;
                height: 280px;
            }
            .core-card h3 { font-size: 1.1em; }
            .core-description { font-size: 0.8em; }
            .core-card.prev { transform: translateX(-40%) rotateY(35deg) scale(0.7); }
            .core-card.next { transform: translateX(40%) rotateY(-35deg) scale(0.7); }
            #prev-core-btn { left: 0; }
            #next-core-btn { right: 0; }

            #banner-container {
                gap: 0.75rem;
            }
            #promo-banner {
                flex-direction: column;
                gap: 8px;
                padding: 8px;
            }
            #promo-text { font-size: 0.8em; text-align: center; }
            #promo-spinner { width: 35px; height: 35px; }
        }
/* --- END block #5 --- */

/* --- <style> block #6 --- */
/* Custom mobile adjustments for the core selection area on small screens
           Increase the size of the selection area to ensure core details remain visible. */
        @media (max-width: 480px) {
            /* Increase the height and perspective of the core selector for better 3D effect */
            #core-selector-container {
                perspective: 900px;
                height: 350px;
                margin-bottom: 4rem;
            }
            /* Enlarge the core cards so their content is readable on mobile */
            .core-card {
                width: 200px;
                height: 300px;
                padding: 12px;
            }
            /* Adjust the positioning of the side cards for better visibility */
            .core-card.prev {
                transform: translateX(-50%) rotateY(35deg) scale(0.85);
                opacity: 0.8;
            }
            .core-card.next {
                transform: translateX(50%) rotateY(-35deg) scale(0.85);
                opacity: 0.8;
            }
            .core-card.active {
                /* Keep the active card slightly enlarged for emphasis */
                transform: translateZ(0) scale(1.05);
                opacity: 1;
            }
            /* Make navigation buttons slightly larger and lower for easy access */
            .core-nav-btn {
                top: 58%;
                width: 40px;
                height: 40px;
                font-size: 2em;
            }
        }
        /* Ensure footer remains fixed at the bottom across all viewports */
        #main-footer {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            z-index: 50;
        }
/* --- END block #6 --- */

/* --- <style> block #7 --- */
/* === Premium Background (Luxury Gold Aurora) === */
.bg-premium{
  position: fixed;
  inset: 0;
  z-index: -2;
  background: radial-gradient(1200px 800px at 20% 10%, rgba(255, 215, 128, 0.10), rgba(0,0,0,0)),
              radial-gradient(1000px 700px at 80% 70%, rgba(176, 0, 32, 0.10), rgba(0,0,0,0)),
              linear-gradient(180deg, #0a0b0f 0%, #0b0d12 50%, #0a0b0f 100%);
  overflow:hidden;
}
.bg-premium::before, .bg-premium::after{
  content:"";
  position:absolute;
  inset:-20%;
  filter: blur(60px);
  mix-blend-mode: screen;
  pointer-events:none;
}
.bg-premium::before{
  background: radial-gradient(600px 500px at 25% 30%, rgba(255, 225, 160, 0.25), rgba(0,0,0,0)),
              radial-gradient(800px 600px at 70% 60%, rgba(255, 184, 51, 0.15), rgba(0,0,0,0));
  animation: premiumFloat1 20s ease-in-out infinite;
}
.bg-premium::after{
  background: radial-gradient(700px 550px at 60% 20%, rgba(255, 240, 200, 0.20), rgba(0,0,0,0)),
              radial-gradient(500px 400px at 35% 75%, rgba(176, 0, 32, 0.18), rgba(0,0,0,0));
  animation: premiumFloat2 28s ease-in-out infinite;
}
@keyframes premiumFloat1 {
  0%   { transform: translate3d(0,0,0) rotate(0deg) scale(1); }
  50%  { transform: translate3d(4%, -3%, 0) rotate(8deg) scale(1.05); }
  100% { transform: translate3d(0,0,0) rotate(0deg) scale(1); }
}
@keyframes premiumFloat2 {
  0%   { transform: translate3d(0,0,0) rotate(0deg) scale(1); }
  50%  { transform: translate3d(-3%, 4%, 0) rotate(-6deg) scale(1.07); }
  100% { transform: translate3d(0,0,0) rotate(0deg) scale(1); }
}

/* Optional subtle grain overlay */
.bg-grain{
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  opacity: .12;
  background-image: radial-gradient(rgba(255,255,255,.06) 1px, transparent 1px);
  background-size: 3px 3px;
  mix-blend-mode: soft-light;
}

/* Hide legacy Matrix rain if present */
canvas#matrix, #matrix, canvas.matrix, .matrix, .matrix-canvas, #matrix-canvas, .matrix-rain {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}
/* --- END block #7 --- */

/* --- <style> block #8 --- */
/* Custom styles for user menu and account protection modal */
    #user-menu {
        position: relative;
        display: flex;
        align-items: center;
        /* place a small gap to the right of the menu so it doesn’t stick to the profile icon */
        margin-right: 12px;
    }
    #user-menu.hidden {
        display: none;
    }
    /* Highlight the menu toggle when the user level is VIP or above */
    #user-menu.vip-highlight #user-menu-toggle {
        border: 2px solid var(--gold);
        box-shadow: 0 0 15px var(--gold), 0 0 30px var(--gold);
    }
    /* Toggle button for opening the menu */
    #user-menu-toggle {
        background: transparent;
        border: 1px solid var(--cyan);
        color: var(--cyan);
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75em;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: 'Orbitron', sans-serif;
        letter-spacing: 1px;
        box-shadow: 0 0 8px var(--cyan);
    }
    #user-menu-toggle:hover {
        background: var(--cyan);
        color: var(--dark-blue);
        box-shadow: 0 0 12px var(--yellow), 0 0 20px var(--yellow);
    }
    /* Dropdown container for menu items */
    #user-menu-items {
        position: absolute;
        top: calc(100% + 6px);
        left: 0;
        background: rgba(0, 0, 0, 0.85);
        border: 1px solid var(--cyan);
        border-radius: 6px;
        padding: 6px 0;
        box-shadow: 0 0 12px var(--cyan);
        display: none;
        flex-direction: column;
        min-width: 160px;
        z-index: 1000;
    }
    #user-menu-items.show {
        display: flex;
    }
    #user-menu-items button {
        background: transparent;
        border: none;
        color: var(--cyan);
        padding: 8px 12px;
        font-size: 0.75em;
        text-align: left;
        width: 100%;
        font-family: 'Orbitron', sans-serif;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    #user-menu-items button:hover {
        background: var(--cyan);
        color: var(--dark-blue);
    }
    /* Override default layout so the user-menu sits next to the user level and the control buttons stay on the far right */
    #user-info-bar {
        justify-content: flex-start;
    }
    #user-controls {
        margin-left: auto;
        display: flex;
        align-items: center;
    }
    /* Responsive adjustments for smaller screens */
    @media (max-width: 640px) {
        #user-menu {
            margin-right: 8px;
        }
        #user-menu-items {
            min-width: 130px;
            right: 0;
            left: auto;
        }
    }
    #account-protection-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 100000;
        align-items: center;
        justify-content: center;
        overflow-y: auto;
        padding: 20px;
        box-sizing: border-box;
    }
    #account-protection-modal.show {
        display: flex;
    }
    #account-protection-content {
        /* Make the protection window look like a glowing hacker terminal */
        max-width: 600px;
        width: 100%;
        background: rgba(0, 0, 0, 0.85);
        border: 2px solid var(--neon-blue);
        box-shadow: 0 0 15px var(--neon-blue), 0 0 35px var(--neon-purple);
        padding: 25px;
        border-radius: 8px;
        overflow: hidden;
    }
    #account-protection-content .hacker-text {
        color: #00ff7f;
        font-family: 'Fira Code', monospace;
        font-size: 1.2em;
        margin: 6px 0;
        text-align: left;
        text-shadow: 0 0 5px #00ff7f, 0 0 10px #00ff7f;
        letter-spacing: 1px;
        white-space: pre;
    }
    /* Cursor for typewriter effect */
    .hacker-cursor {
        border-right: 2px solid #00ff7f;
        animation: blink-cursor 0.6s steps(1) infinite;
    }
    @keyframes blink-cursor {
        0%, 100% { border-color: #00ff7f; }
        50% { border-color: transparent; }
    }
/* --- END block #8 --- */

/* --- <style> block #9 --- */
/* --- FIX: Prevent title 'CHỌN LÕI A.I' from being overlapped by banners on mobile --- */
    :root{
      --safe-top: env(safe-area-inset-top, 0px);
    }
    @media (max-width: 480px){
      /* Push the whole selection screen content down by the height of the fixed bars */
      #aiCoreSelectionScreen{
        padding-top: calc(var(--safe-top) + 120px) !important; /* was 80px */
      }
      /* Keep a comfortable spacing for the title relative to the bars */
      .title-vip{
        margin-top: 0 !important;
        padding-top: 8px;
      }
    }
    @media (max-width: 360px){
      #aiCoreSelectionScreen{
        padding-top: calc(var(--safe-top) + 140px) !important;
      }
    }
/* --- END block #9 --- */

/* ===== END MIGRATED ===== */
